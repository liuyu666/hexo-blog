---
title: npm 版本
categories: 技术
date: 2021-11-25 14:00
updated: 2021-11-25 14:00
tags: npm
---

#### 版本号策略

版本号格式：**主版本号**.**次版本号**.**修订号**；

- 主版本号：当你做了不兼容的 API 修改；

- 次版本号：当你做了向后兼容的功能性新增；

- 修订号：当你做了向后兼容的问题修正；

#### 版本发布

| npm version | 功能                                                                                                                                                                                                                                                                                |
| ----------- | ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | --- |
| major       | - 如果没有预发布号，则直接升级一位大号，其他位都置为 0 - 如果有预发布号： -- 中号和小号都为 0，则不升级大号，而将预发布号删掉。即 2.0.0-1 变成 2.0.0，这就是预发布的作用 -- 如果中号和小号有任意一个不是 0，那边会升级一位大号，其他位都置为 0，清空预发布号。即 2.0.1-0 变成 3.0.0 |
| minor       | - 如果没有预发布号，则升级一位中号，大号不动，小号置为空 - 如果有预发布号: -- 如果小号为 0，则不升级中号，将预发布号去掉 -- 如果小号不为 0，同理没有预发布号                                                                                                                        |
| patch       | - 如果没有预发布号：直接升级小号，去掉预发布号 - 如果有预发布号：去掉预发布号，其他不动                                                                                                                                                                                             |
| premajor    | - 直接升级大号，中号和小号置为 0，增加预发布号为 0                                                                                                                                                                                                                                  |
| preminor    | - 直接升级中号，小号置为 0，增加预发布号为 0                                                                                                                                                                                                                                        | `   |
| prepatch    | - 直接升级小号，增加预发布号为 0                                                                                                                                                                                                                                                    |
| prerelease  | - 如果没有预发布号：增加小号，增加预发布号为 0 - 如果有预发布号，则升级预发布号                                                                                                                                                                                                     |

```bash
liuyu04@A013633-NC MINGW64 /e/npm-version
$ npm version prepatch
v1.0.1-0

liuyu04@A013633-NC MINGW64 /e/npm-version
$ npm version prepatch
v1.0.2-0

liuyu04@A013633-NC MINGW64 /e/npm-version
$ npm version prerelease
v1.0.2-1

liuyu04@A013633-NC MINGW64 /e/npm-version
$ npm version prerelease
v1.0.2-2

liuyu04@A013633-NC MINGW64 /e/npm-version
$ npm version patch
v1.0.2

liuyu04@A013633-NC MINGW64 /e/npm-version
$ npm version minor
v1.1.0

liuyu04@A013633-NC MINGW64 /e/npm-version
$ npm version major
v2.0.0

liuyu04@A013633-NC MINGW64 /e/npm-version
$ npm version preminor
v2.1.0-0

liuyu04@A013633-NC MINGW64 /e/npm-version
$ npm version premajor
v3.0.0-0
```

#### 版本号连接符号

- ~x.x.x
  - 最大能变化 patch
- ^x.x.x
  - 最大能变化 minor
    - `0.1.* ` 会匹配最近的小版本依赖包，比如~0.1.3 会匹配所有 0.1.x 版本，但是不包括 0.2.0
    - `1.*.*` 会匹配最近的中版本依赖包，比如~1.2.3 会匹配所有 1.2.x 版本，但是不包括 1.3.0
- \*x.x.x
  - 最新版本
- \> < <= >= x.x.x
  - 大于、小于、大于等于、小于等于某个版本号
- x.x.x-x.x.x
  - 两个版本号之间
